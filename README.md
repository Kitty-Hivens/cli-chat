# Консольный Чат на Java (Virtual Threads)

Это простой многопользовательский консольный чат-сервер и клиент, написанный на Java. Проект демонстрирует использование современных возможностей Java, включая **Project Loom (виртуальные потоки)**, для эффективной обработки множества одновременных клиентских подключений.

## Основные возможности

  * **Многопользовательский чат:** Поддержка нескольких одновременных клиентов.
  * **Регистрация по имени:** При входе каждый пользователь должен ввести уникальное имя.
  * **Публичные сообщения:** Сообщения, видимые всем участникам чата.
  * **Личные сообщения:** Возможность отправлять приватные сообщения другому пользователю по его имени (`/msg <имя> <сообщение>`).
  * **Уведомления:** Автоматические сообщения о входе и выходе пользователей из чата.
  * **Высокая производительность:** Использование `Thread.startVirtualThread()` позволяет серверу легко масштабироваться до тысяч подключений, не создавая тяжеловесные системные потоки.

-----

## Технологии

  * **Java (JDK 26)**
  * **Virtual Threads (Project Loom)**: Каждый клиент обрабатывается в собственном виртуальном потоке.
  * **Java Sockets (TCP/IP)**: Для сетевого взаимодействия.
  * `ConcurrentHashMap`: Для потокобезопасного хранения списка клиентов и их имен.

-----

## Требования

Для компиляции и запуска проекта требуется **JDK 26** или новее (из-за использования API виртуальных потоков).

-----

## Как запустить

Предполагается, что оба файла (`ChatServer.java` и `ChatClient.java`) находятся в директории `src/goldyl/chat/`.

### 1\. Компиляция

Сначала скомпилируем исходные файлы. Создадим директорию `bin` для `.class` файлов:

```bash
# Создаем папку для скомпилированных классов
mkdir bin

# Компилируем .java файлы
javac -d bin src/goldyl/chat/ChatServer.java src/goldyl/chat/ChatClient.java
```

### 2\. Запуск сервера

Откройте терминал и выполните команду:

```bash
java -cp bin goldyl.chat.ChatServer
```

Вы должны увидеть сообщение:

```
Server started on port 8080
```

### 3\. Запуск клиента

Откройте **новый** терминал (или несколько терминалов, чтобы симулировать нескольких пользователей) и выполните ту же команду:

```bash
java -cp bin goldyl.chat.ChatClient
```

-----

## Как использовать

### 1\. Вход в чат

После запуска клиента, сервер немедленно запросит ваше имя:

```
Введите ваше имя:
```

Введите уникальное имя (без пробелов) и нажмите Enter.

```
Введите ваше имя:
Alice
--- Добро пожаловать в чат, Alice! ---
--- Для личного сообщения введите: /msg <имя_получателя> <сообщение> ---
```

В терминале сервера появится запись о подключении.

### 2\. Отправка публичных сообщений

Просто введите любое сообщение и нажмите Enter. Его увидят все участники чата, включая вас.

```
[14:32:01] [Alice]: Привет всем!
```

### 3\. Отправка личных сообщений

Чтобы отправить сообщение только одному пользователю (например, `Bob`), используйте команду `/msg`:

```
/msg Bob Привет, как дела?
```

  * **Вы (Alice)** увидите:
    ```
    [14:33:15] [ЛС для Bob]: Привет, как дела?
    ```
  * **Получатель (Bob)** увидит:
    ```
    [14:33:15] [ЛС от Alice]: Привет, как дела?
    ```

### 4\. Выход из чата

Чтобы выйти, просто закройте терминал клиента (или нажмите `Ctrl+C`). Все остальные участники чата получат уведомление о вашем выходе.

```
--- Alice покинул чат. ---
```
